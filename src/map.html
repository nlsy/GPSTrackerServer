<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css" />
  <title>GPS-Tracker</title>
  <meta name="description" content="GPS-Tracker" />

</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-12" id="map"></div>
      <div class="col-12">
        <table class="table table-fixed" id="datatable">
          <thead>
            <tr>
              <th class="col-1">#</th>
              <th class="col-2">Serial Number</th>
              <th class="col-3">Server DateTime</th>
              <th class="col-2">Satellite Time</th>
              <th class="col-2">Longitude</th>
              <th class="col-2">Latitude</th>
            </tr>
          </thead>
          <tbody id="data_items">
            <tr class="item" id="proto_item">
              <td class="col-1">1</td>
              <td class="col-3">No Data</td>
              <td class="col-2">No Data</td>
              <td class="col-2">No Data</td>
              <td class="col-2">No Data</td>
              <td class="col-2">No Data</td>
            </tr>
          </tbody>
        </table>
        <div id=""></div>
      </div>
    </div>
  </div>
  <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDk0kR18tUOECtGNTSeOAwy99IsvStX3pE&callback=initMap">
  </script>
  <script>
    var map;

    function initMap(){
      // Map options
      var options = {
        center: {lat: 47.8141353, lng: 9.6538979},
        zoom: 15,
      }
      // New Map
      map = new google.maps.Map(document.getElementById('map'), options);
      
      // Marker
      const marker = new google.maps.Marker({
        position: {lat: 47.8141353, lng: 9.6538979},
        map: map,
      });
    }
  </script>
  <script>
    var xmlhttp = new XMLHttpRequest();

    xmlhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        myObj = JSON.parse(this.responseText);
        console.log(myObj);
      }
    };
    xmlhttp.open("GET", "data_bridge.php", true);
    xmlhttp.send();
  </script>
  <script>
    const datatable = document.querySelector('#data_items');
    get();
    
    function get(buffer){
      document.getElementById("proto_item").remove();

      for(var i = 0; i<30; i++){
        datatable.insertAdjacentHTML("beforeend", `
        <tr class="item" onclick="activate('item_${i}')" id="item_${i}">
          <td class="col-1">${i}</td>
          <td class="col-3">NULL</td>
          <td class="col-2">NULL</td>
          <td class="col-2">NULL</td>
          <td class="col-2">NULL</td>
          <td class="col-2">NULL</td>
        </tr>`);
      }
    }
    function activate(element){
      //document.getElementById(element).insertAdjacentHTML(, "active");
      document.getElementById(element).classList.toggle('active');
    }
  </script>
</body>
</html>